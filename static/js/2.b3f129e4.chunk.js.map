{"version":3,"sources":["../static/js/2.b3f129e4.chunk.js","constants/noteList.js","constants/scaleList.js","pages/Home/notes.js"],"names":["webpackJsonp","207","module","__webpack_exports__","__webpack_require__","Object","defineProperty","value","note_list","name","octave","string","perfect","return_list","reverse","map","note","index","assign","position","active","208","c_major","g_major","d_major","a_major","e_major","b_major","f♯_major","c♯_major","87","_","_toConsumableArray","arr","Array","isArray","i","arr2","length","from","d","getPrecisionBase","generateNote","validateNote","readNote","__WEBPACK_IMPORTED_MODULE_0_Constants_noteList_js__","__WEBPACK_IMPORTED_MODULE_1_Constants_scaleList_js__","is_sharp","hertz_list","NoteList","forEach","note_list_item","push","base_frequency","next_frequency","prev_frequency","divider","hertz","recompute_hertz","isNil","Math","abs","count","arguments","undefined","callback","notes_list","this","state","notes_pool","filter","p","random_seed","floor","random","previous_note","setState","isFunction","onCorrect","onMistake","frequency","valid_note","noise_filter","isEmptyArray","note_target","last_note","note_test","last_test","concat","is_listening","sharps_list","ScaleList","key_signature_name","required_note","notes_index","required_name","required_perfect","includes","frequency_difference","note_current","precision_base","correct","rating","correct_max","notes_index_count","notes_index_assist","mistake_padding","mistake","mistake_max","DefaultExport","bind","call"],"mappings":"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","file":"static/js/2.b3f129e4.chunk.js","sourcesContent":["webpackJsonp([2,6,7],{\n\n/***/ 207:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\nvar note_list=[{name:\"G\",octave:3,string:\"G\",perfect:[196.00,207.65]},{name:\"A\",octave:3,string:\"G\",perfect:[220.00,233.08]},{name:\"B\",octave:3,string:\"G\",perfect:[246.94,261.63]},{name:\"C\",octave:4,string:\"G\",perfect:[261.63,277.18]},{name:\"D\",octave:4,string:\"D\",perfect:[293.66,311.13]},{name:\"E\",octave:4,string:\"D\",perfect:[329.63,349.23]},{name:\"F\",octave:4,string:\"D\",perfect:[349.23,369.99]},{name:\"G\",octave:4,string:\"D\",perfect:[392.00,415.30]},{name:\"A\",octave:4,string:\"A\",perfect:[440.00,466.16]},{name:\"B\",octave:4,string:\"A\",perfect:[493.88,523.25]},{name:\"C\",octave:5,string:\"A\",perfect:[523.25,554.37]},{name:\"D\",octave:5,string:\"A\",perfect:[587.33,622.25]},{name:\"E\",octave:5,string:\"E\",perfect:[659.25,698.46]},{name:\"F\",octave:5,string:\"E\",perfect:[698.46,739.99]},{name:\"G\",octave:5,string:\"E\",perfect:[783.99,830.61]},{name:\"A\",octave:5,string:\"E\",perfect:[880.00,932.33]},{name:\"B\",octave:5,string:\"E\",perfect:[987.77,1046.50]},{name:\"C\",octave:6,string:\"B\",perfect:[1046.50,1108.73]},{name:\"D\",octave:6,string:\"B\",perfect:[1174.66,1244.51]},{name:\"E\",octave:6,string:\"B\",perfect:[1318.51,1396.91]},{name:\"F\",octave:6,string:\"B\",perfect:[1396.91,1479.98]}];var return_list=note_list.reverse().map(function(note,index){return Object.assign({},note,{position:index*25,active:true});});return_list.reverse();/* harmony default export */ __webpack_exports__[\"default\"] = (return_list);\n\n/***/ }),\n\n/***/ 208:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\"c_major\":[],\"g_major\":[\"F\"],\"d_major\":[\"F\",\"C\"],\"a_major\":[\"F\",\"C\",\"G\"],\"e_major\":[\"F\",\"C\",\"G\",\"D\"],\"b_major\":[\"F\",\"C\",\"G\",\"D\",\"A\"],\"f♯_major\":[\"F\",\"C\",\"G\",\"D\",\"A\",\"E\"],\"c♯_major\":[\"F\",\"C\",\"G\",\"D\",\"A\",\"E\",\"B\"]});\n\n/***/ }),\n\n/***/ 87:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* WEBPACK VAR INJECTION */(function(_) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getPrecisionBase\", function() { return getPrecisionBase; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"generateNote\", function() { return generateNote; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"validateNote\", function() { return validateNote; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"readNote\", function() { return readNote; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_Constants_noteList_js__ = __webpack_require__(207);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_Constants_scaleList_js__ = __webpack_require__(208);\nfunction _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else{return Array.from(arr);}}// import { setStateAndSave, getStateFromLocalStorage } from 'Assets/scripts/localStorage';\nvar getPrecisionBase=function getPrecisionBase(note,is_sharp){var hertz_list=[];__WEBPACK_IMPORTED_MODULE_0_Constants_noteList_js__[\"default\"].forEach(function(note_list_item){hertz_list.push(note_list_item.perfect[0]);hertz_list.push(note_list_item.perfect[1]);});var base_frequency=note.perfect[is_sharp?1:0];var next_frequency=0;var prev_frequency=0;var divider=2;hertz_list.forEach(function(hertz,index){if(base_frequency==hertz){if(index>0){if(prev_frequency==base_frequency){var recompute_hertz=hertz_list[index+2];if(_.isNil(recompute_hertz)){prev_frequency=base_frequency;divider-=1;}else{prev_frequency=hertz_list[index-2];}}else{prev_frequency=hertz_list[index-1];}}else{prev_frequency=base_frequency;divider-=1;}if(index<hertz_list.length-1){if(next_frequency==base_frequency){var _recompute_hertz=hertz_list[index+2];if(_.isNil(_recompute_hertz)){next_frequency=base_frequency;divider-=1;}else{next_frequency=hertz_list[index+2];}}else{next_frequency=hertz_list[index+1];}}else{next_frequency=base_frequency;divider-=1;}}});var next_difference=Math.abs(base_frequency-next_frequency);var prev_difference=Math.abs(base_frequency-prev_frequency);var return_value=(next_difference+prev_difference)/(divider*1.5);return return_value;};var generateNote=function generateNote(){var count=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var callback=arguments[1];var notes_list=[].concat(_toConsumableArray(this.state.notes_list));var notes_pool=this.state.notes_pool.filter(function(p){return p.active==true;});if(notes_pool.length>1){while(count>0){var random_seed=Math.floor(Math.random()*notes_pool.length);if(random_seed==notes_pool.length){random_seed=notes_pool.length-1;};if(!_.isNil(this.previous_note)){while(random_seed==this.previous_note){random_seed=Math.floor(Math.random()*notes_pool.length);if(random_seed==notes_pool.length){random_seed=notes_pool.length-1;};}}this.previous_note=random_seed;notes_list.push(notes_pool[random_seed]);count--;}}this.setState({notes_list:notes_list},function(){if(!_.isNil(callback)&&_.isFunction(callback)){callback();}});};var validateNote=function validateNote(note,onCorrect,onMistake){if(note.frequency>190&&note.frequency<1600){var valid_note=false;switch(this.state.noise_filter){case\"frequency\":if(_.isEmptyArray(this.note_target)){this.note_target=[note.frequency];}else{var last_note=this.note_target[this.note_target.length-1];if(Math.abs(note.frequency-last_note)<5){valid_note=true;}else{if(_.isEmptyArray(this.note_test)){this.note_test=[note.frequency];}else{var last_test=this.note_test[this.note_test.length-1];if(Math.abs(note.frequency-last_test)<5){this.note_test.push(note.frequency);}else{this.note_test=[note.frequency];}if(this.note_test.length>3){this.note_target=[].concat(_toConsumableArray(this.note_test));valid_note=true;}}}};break;case\"name\":default:if(_.isEmptyArray(this.note_target)){this.note_target=[note.name];}else{var _last_note=this.note_target[this.note_target.length-1];if(note.name==_last_note){valid_note=true;}else{if(_.isEmptyArray(this.note_test)){this.note_test=[note.name];}else{var _last_test=this.note_test[this.note_test.length-1];if(note.name==_last_test){this.note_test.push(note.name);}else{this.note_test=[note.name];}if(this.note_test.length>3){this.note_target=[].concat(_toConsumableArray(this.note_test));valid_note=true;}}}};break;}if(valid_note){this.note_test=[];this.note_target.push(note[this.state.noise_filter]);this.readNote(note,onCorrect,onMistake);}}};var readNote=function readNote(note,onCorrect,onMistake){this.is_listening=10;var sharps_list=__WEBPACK_IMPORTED_MODULE_1_Constants_scaleList_js__[\"default\"][this.state.key_signature_name];var required_note=this.state.notes_list[this.state.notes_index];var required_name=required_note.name;var required_perfect=required_note.perfect[0];var is_sharp=sharps_list.includes(required_name);if(is_sharp){required_perfect=required_note.perfect[1];switch(required_name){case\"E\":required_name=\"F\";break;case\"B\":required_name=\"C\";break;default:required_name+=\"♯\";break;}}var frequency_difference=Math.abs(required_perfect-note.frequency);if(_.isNil(this.note_current.precision_base)){this.note_current.precision_base=this.getPrecisionBase(required_note,is_sharp);}if(note.name==required_name&&frequency_difference<this.note_current.precision_base){this.note_current.correct+=1;this.note_current.rating.push(frequency_difference);if(this.note_current.correct>=this.note_current.correct_max){onCorrect(note);}else{if(!this.state.notes_index_count){this.setState({notes_index_assist:\"correct\"});}}}else{if(this.note_current.mistake_padding<=0){this.note_current.mistake+=1;if(this.note_current.mistake>=this.note_current.mistake_max&&this.state.notes_index_count){onMistake(note);}else{this.note_current.correct=0;}if(!this.state.notes_index_count){this.setState({notes_index_assist:required_perfect>note.frequency?\"higher\":\"lower\"});}}else{this.note_current.mistake_padding-=1;}}};var DefaultExport=function DefaultExport(){this.getPrecisionBase=getPrecisionBase.bind(this);this.generateNote=generateNote.bind(this);this.validateNote=validateNote.bind(this);this.readNote=readNote.bind(this);return{getPrecisionBase:getPrecisionBase,generateNote:generateNote,validateNote:validateNote,readNote:readNote};};/* harmony default export */ __webpack_exports__[\"default\"] = (DefaultExport);\n/* WEBPACK VAR INJECTION */}.call(__webpack_exports__, __webpack_require__(59)))\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/2.b3f129e4.chunk.js","let note_list = [\r\n    {name: \"G\", octave: 3, string: \"G\", perfect: [196.00, 207.65]},\r\n    {name: \"A\", octave: 3, string: \"G\", perfect: [220.00, 233.08]},\r\n    {name: \"B\", octave: 3, string: \"G\", perfect: [246.94, 261.63]},\r\n    {name: \"C\", octave: 4, string: \"G\", perfect: [261.63, 277.18]},\r\n\r\n    {name: \"D\", octave: 4, string: \"D\", perfect: [293.66, 311.13]},\r\n    {name: \"E\", octave: 4, string: \"D\", perfect: [329.63, 349.23]},\r\n    {name: \"F\", octave: 4, string: \"D\", perfect: [349.23, 369.99]},\r\n    {name: \"G\", octave: 4, string: \"D\", perfect: [392.00, 415.30]},\r\n\r\n    {name: \"A\", octave: 4, string: \"A\", perfect: [440.00, 466.16]},\r\n    {name: \"B\", octave: 4, string: \"A\", perfect: [493.88, 523.25]},\r\n    {name: \"C\", octave: 5, string: \"A\", perfect: [523.25, 554.37]},\r\n    {name: \"D\", octave: 5, string: \"A\", perfect: [587.33, 622.25]},\r\n\r\n    {name: \"E\", octave: 5, string: \"E\", perfect: [659.25, 698.46]},\r\n    {name: \"F\", octave: 5, string: \"E\", perfect: [698.46, 739.99]},\r\n    {name: \"G\", octave: 5, string: \"E\", perfect: [783.99, 830.61]},\r\n    {name: \"A\", octave: 5, string: \"E\", perfect: [880.00, 932.33]},\r\n\r\n    {name: \"B\", octave: 5, string: \"E\", perfect: [987.77, 1046.50]},\r\n\r\n    {name: \"C\", octave: 6, string: \"B\", perfect: [1046.50, 1108.73]},\r\n    {name: \"D\", octave: 6, string: \"B\", perfect: [1174.66, 1244.51]},\r\n    {name: \"E\", octave: 6, string: \"B\", perfect: [1318.51, 1396.91]},\r\n\r\n    {name: \"F\", octave: 6, string: \"B\", perfect: [1396.91, 1479.98]},\r\n]\r\n\r\nlet return_list = note_list.reverse().map((note, index)=>{\r\n    return {...note, position: index*25, active: true}\r\n})\r\n\r\nreturn_list.reverse();\r\n\r\nexport default return_list;\n\n\n// WEBPACK FOOTER //\n// ./src/constants/noteList.js","export default {\r\n    \"c_major\": [],\r\n    \"g_major\": [\"F\"],\r\n    \"d_major\": [\"F\", \"C\"],\r\n    \"a_major\": [\"F\", \"C\", \"G\"],\r\n    \"e_major\": [\"F\", \"C\", \"G\", \"D\"],\r\n    \"b_major\": [\"F\", \"C\", \"G\", \"D\", \"A\"],\r\n    \"f♯_major\": [\"F\", \"C\", \"G\", \"D\", \"A\", \"E\"],\r\n    \"c♯_major\": [\"F\", \"C\", \"G\", \"D\", \"A\", \"E\", \"B\"],\r\n}\r\n   \r\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants/scaleList.js","// import { setStateAndSave, getStateFromLocalStorage } from 'Assets/scripts/localStorage';\r\nimport NoteList from 'Constants/noteList.js';\r\nimport ScaleList from 'Constants/scaleList.js';\r\n\r\nexport const getPrecisionBase = function(note, is_sharp){\r\n    let hertz_list = [];\r\n    NoteList.forEach((note_list_item)=>{\r\n        hertz_list.push(note_list_item.perfect[0])\r\n        hertz_list.push(note_list_item.perfect[1])\r\n    });\r\n\r\n    let base_frequency = note.perfect[is_sharp ? 1 : 0];\r\n    let next_frequency = 0;\r\n    let prev_frequency = 0;\r\n    let divider = 2;\r\n\r\n    hertz_list.forEach((hertz, index)=>{\r\n        if (base_frequency == hertz){\r\n            if (index > 0){\r\n                if (prev_frequency == base_frequency){\r\n                    let recompute_hertz = hertz_list[index + 2];\r\n                    if (_.isNil(recompute_hertz)){\r\n                        prev_frequency = base_frequency;\r\n                        divider -= 1;\r\n                    } else {\r\n                        prev_frequency = hertz_list[index - 2];\r\n                    }\r\n                    \r\n                } else {\r\n                    prev_frequency = hertz_list[index - 1];\r\n                }\r\n            } else {\r\n                prev_frequency = base_frequency;\r\n                divider -= 1;\r\n            }\r\n\r\n            if (index < hertz_list.length - 1){\r\n                if (next_frequency == base_frequency){\r\n                    let recompute_hertz = hertz_list[index + 2];\r\n                    if (_.isNil(recompute_hertz)){\r\n                        next_frequency = base_frequency;\r\n                        divider -= 1;\r\n                    } else {\r\n                        next_frequency = hertz_list[index + 2];\r\n                    }\r\n                } else {\r\n                    next_frequency = hertz_list[index + 1];\r\n                }\r\n            } else {\r\n                next_frequency = base_frequency;\r\n                divider -= 1;\r\n            }\r\n        }\r\n    })\r\n\r\n    let next_difference = Math.abs(base_frequency - next_frequency);\r\n    let prev_difference = Math.abs(base_frequency - prev_frequency);\r\n    \r\n    let return_value = (next_difference + prev_difference) / (divider*1.5);\r\n    return return_value\r\n}\r\n\r\nexport const generateNote = function(count = 0, callback){\r\n    let notes_list = [...this.state.notes_list];\r\n    let notes_pool = this.state.notes_pool.filter(p=>(p.active == true));\r\n    if (notes_pool.length > 1){\r\n        while(count > 0){\r\n            let random_seed = Math.floor(Math.random()*(notes_pool.length));\r\n            if (random_seed == notes_pool.length){random_seed = notes_pool.length - 1};\r\n        \r\n            if (!_.isNil(this.previous_note)){\r\n                while(random_seed == this.previous_note){\r\n                    random_seed = Math.floor(Math.random()*(notes_pool.length));\r\n                    if (random_seed == notes_pool.length){random_seed = notes_pool.length - 1};\r\n                }\r\n            }\r\n    \r\n            this.previous_note = random_seed;\r\n            notes_list.push( notes_pool[random_seed] )\r\n            count--\r\n        }\r\n    }\r\n\r\n    this.setState({notes_list}, ()=>{\r\n        if (!_.isNil(callback) && _.isFunction(callback)){callback()}\r\n    });\r\n}\r\n\r\nexport const validateNote = function(note, onCorrect, onMistake){\r\n    if (note.frequency > 190 && note.frequency < 1600){\r\n        let valid_note = false;\r\n        switch(this.state.noise_filter){\r\n            case \"frequency\":\r\n                if (_.isEmptyArray(this.note_target)){\r\n                    this.note_target = [ note.frequency ]\r\n                } else {\r\n                    let last_note = this.note_target[this.note_target.length - 1];\r\n                    if (Math.abs(note.frequency - last_note) < 5){\r\n                        valid_note = true;\r\n                    } else {\r\n                        if (_.isEmptyArray(this.note_test)){\r\n                            this.note_test = [ note.frequency ];\r\n                        } else {\r\n                            let last_test = this.note_test[this.note_test.length - 1];\r\n                            if (Math.abs(note.frequency - last_test) < 5){\r\n                                this.note_test.push(note.frequency);\r\n                            } else {\r\n                                this.note_test = [ note.frequency ]\r\n                            }\r\n    \r\n                            if (this.note_test.length > 3){\r\n                                this.note_target = [ ...this.note_test ];\r\n                                valid_note = true;\r\n                            }\r\n                        }\r\n                    }\r\n                };\r\n                break\r\n            \r\n            case \"name\":\r\n            default: \r\n                if (_.isEmptyArray(this.note_target)){\r\n                    this.note_target = [ note.name ]\r\n                } else {\r\n                    let last_note = this.note_target[this.note_target.length - 1];\r\n                    if (note.name == last_note){\r\n                        valid_note = true;\r\n                    } else {\r\n                        if (_.isEmptyArray(this.note_test)){\r\n                            this.note_test = [ note.name ];\r\n                        } else {\r\n                            let last_test = this.note_test[this.note_test.length - 1];\r\n                            if (note.name == last_test){\r\n                                this.note_test.push(note.name);\r\n                            } else {\r\n                                this.note_test = [ note.name ]\r\n                            }\r\n    \r\n                            if (this.note_test.length > 3){\r\n                                this.note_target = [ ...this.note_test ];\r\n                                valid_note = true;\r\n                            }\r\n                        }\r\n                    }\r\n                };\r\n                break\r\n        }\r\n\r\n        if (valid_note){\r\n            this.note_test = [];\r\n            this.note_target.push(note[this.state.noise_filter]);\r\n            this.readNote(note, onCorrect, onMistake)\r\n        }\r\n    }\r\n}\r\n\r\nexport const readNote = function(note, onCorrect, onMistake){\r\n    this.is_listening = 10;\r\n\r\n    let sharps_list = ScaleList[this.state.key_signature_name];\r\n    let required_note = this.state.notes_list[this.state.notes_index];\r\n    let required_name = required_note.name;\r\n    let required_perfect = required_note.perfect[0];\r\n\r\n    let is_sharp = sharps_list.includes(required_name);\r\n    \r\n    if (is_sharp){\r\n        required_perfect = required_note.perfect[1];\r\n        switch(required_name){\r\n            case \"E\": required_name = \"F\"; break;\r\n            case \"B\": required_name = \"C\"; break;\r\n            default: required_name += \"♯\"; break;\r\n        }\r\n    }\r\n\r\n    let frequency_difference = Math.abs(required_perfect - note.frequency);\r\n\r\n    if (_.isNil(this.note_current.precision_base)){\r\n        this.note_current.precision_base = this.getPrecisionBase(required_note, is_sharp)\r\n    }\r\n    \r\n    if (note.name == required_name && frequency_difference < this.note_current.precision_base){\r\n        this.note_current.correct += 1;\r\n        this.note_current.rating.push(frequency_difference);\r\n\r\n        if (this.note_current.correct >= this.note_current.correct_max){  \r\n            onCorrect(note);\r\n        } else {\r\n            if (!this.state.notes_index_count){\r\n                this.setState({\r\n                    notes_index_assist: \"correct\",\r\n                });\r\n            }\r\n        }\r\n    } else {\r\n        if (this.note_current.mistake_padding <= 0){\r\n            this.note_current.mistake += 1;\r\n            if (this.note_current.mistake >= this.note_current.mistake_max && this.state.notes_index_count){\r\n                onMistake(note)\r\n            } else {\r\n                this.note_current.correct = 0;\r\n            }\r\n\r\n            if (!this.state.notes_index_count){\r\n                this.setState({\r\n                    notes_index_assist: required_perfect > note.frequency ? \"higher\" : \"lower\",\r\n                });\r\n            }\r\n        } else {\r\n            this.note_current.mistake_padding -= 1;\r\n        }\r\n    }\r\n}\r\n\r\nconst DefaultExport =  function(){\r\n    this.getPrecisionBase = getPrecisionBase.bind(this);\r\n    this.generateNote = generateNote.bind(this);\r\n    this.validateNote = validateNote.bind(this);\r\n    this.readNote = readNote.bind(this);\r\n\r\n    return {\r\n        getPrecisionBase,\r\n        generateNote,\r\n        validateNote,\r\n        readNote,\r\n    }\r\n}\r\n\r\nexport default DefaultExport\n\n\n// WEBPACK FOOTER //\n// ./src/pages/Home/notes.js"],"sourceRoot":""}