webpackJsonp([1,4,5],{206:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=[{name:"G",octave:3,string:"G",perfect:[196,207.65]},{name:"A",octave:3,string:"G",perfect:[220,233.08]},{name:"B",octave:3,string:"G",perfect:[246.94,261.63]},{name:"C",octave:4,string:"G",perfect:[261.63,277.18]},{name:"D",octave:4,string:"D",perfect:[293.66,311.13]},{name:"E",octave:4,string:"D",perfect:[329.63,349.23]},{name:"F",octave:4,string:"D",perfect:[349.23,369.99]},{name:"G",octave:4,string:"D",perfect:[392,415.3]},{name:"A",octave:4,string:"A",perfect:[440,466.16]},{name:"B",octave:4,string:"A",perfect:[493.88,523.25]},{name:"C",octave:5,string:"A",perfect:[523.25,554.37]},{name:"D",octave:5,string:"A",perfect:[587.33,622.25]},{name:"E",octave:5,string:"E",perfect:[659.25,698.46]},{name:"F",octave:5,string:"E",perfect:[698.46,739.99]},{name:"G",octave:5,string:"E",perfect:[783.99,830.61]},{name:"A",octave:5,string:"E",perfect:[880,932.33]},{name:"B",octave:5,string:"E",perfect:[987.77,1046.5]},{name:"C",octave:6,string:"B",perfect:[1046.5,1108.73]},{name:"D",octave:6,string:"B",perfect:[1174.66,1244.51]},{name:"E",octave:6,string:"B",perfect:[1318.51,1396.91]},{name:"F",octave:6,string:"B",perfect:[1396.91,1479.98]}],r=s.reverse().map(function(t,e){return Object.assign({},t,{position:25*e,active:!0})});r.reverse(),e.default=r},207:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={c_major:[],g_major:["F"],d_major:["F","C"],a_major:["F","C","G"],e_major:["F","C","G","D"],b_major:["F","C","G","D","A"],"f♯_major":["F","C","G","D","A","E"],"c♯_major":["F","C","G","D","A","E","B"]}},86:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){function s(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}n.d(e,"getPrecisionBase",function(){return a}),n.d(e,"generateNote",function(){return o}),n.d(e,"validateNote",function(){return c}),n.d(e,"readNote",function(){return h});var r=n(206),i=n(207),a=function(e,n){var s=[];r.default.forEach(function(t){s.push(t.perfect[0]),s.push(t.perfect[1])});var i=e.perfect[n?1:0],a=0,o=0,c=2;return s.forEach(function(e,n){if(i==e){if(n>0)if(o==i){var r=s[n+2];t.isNil(r)?(o=i,c-=1):o=s[n-2]}else o=s[n-1];else o=i,c-=1;if(n<s.length-1)if(a==i){var h=s[n+2];t.isNil(h)?(a=i,c-=1):a=s[n+2]}else a=s[n+1];else a=i,c-=1}}),(Math.abs(i-a)+Math.abs(i-o))/(1.5*c)},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments[1],r=[].concat(s(this.state.notes_list)),i=this.state.notes_pool.filter(function(t){return 1==t.active});if(i.length>1)for(;e>0;){var a=Math.floor(Math.random()*i.length);if(a==i.length&&(a=i.length-1),!t.isNil(this.previous_note))for(;a==this.previous_note;)(a=Math.floor(Math.random()*i.length))==i.length&&(a=i.length-1);this.previous_note=a,r.push(i[a]),e--}this.setState({notes_list:r},function(){!t.isNil(n)&&t.isFunction(n)&&n()})},c=function(e){if(e.frequency>190&&e.frequency<1600){var n=!1;switch(this.state.noise_filter){case"frequency":if(t.isEmptyArray(this.note_target))this.note_target=[e.frequency];else{var r=this.note_target[this.note_target.length-1];if(Math.abs(e.frequency-r)<5)n=!0;else if(t.isEmptyArray(this.note_test))this.note_test=[e.frequency];else{var i=this.note_test[this.note_test.length-1];Math.abs(e.frequency-i)<5?this.note_test.push(e.frequency):this.note_test=[e.frequency],this.note_test.length>3&&(this.note_target=[].concat(s(this.note_test)),n=!0)}}break;case"name":default:if(t.isEmptyArray(this.note_target))this.note_target=[e.name];else{var a=this.note_target[this.note_target.length-1];if(e.name==a)n=!0;else if(t.isEmptyArray(this.note_test))this.note_test=[e.name];else{var o=this.note_test[this.note_test.length-1];e.name==o?this.note_test.push(e.name):this.note_test=[e.name],this.note_test.length>3&&(this.note_target=[].concat(s(this.note_test)),n=!0)}}}n&&(this.note_test=[],this.note_target.push(e[this.state.noise_filter]),this.readNote(e))}},h=function(e){var n=i.default[this.state.key_signature_name],s=this.state.notes_list[this.state.notes_index],r=s.name,a=s.perfect[0],o=n.includes(r);if(o)switch(a=s.perfect[1],r){case"E":r="F";break;case"B":r="C";break;default:r+="♯"}var c=Math.abs(a-e.frequency);t.isNil(this.note_current.precision_base)&&(this.note_current.precision_base=this.getPrecisionBase(s,o)),e.name==r&&c<this.note_current.precision_base?(this.note_current.correct+=1,this.note_current.rating.push(c),this.note_current.correct>=this.note_current.correct_max?_.bind(this)(e):this.state.notes_index_count||this.setState({notes_index_assist:"correct"})):this.note_current.mistake_padding<=0?(this.note_current.mistake+=1,this.note_current.mistake>=this.note_current.mistake_max&&this.state.notes_index_count?u.bind(this)(e):this.note_current.correct=0,this.state.notes_index_count||this.setState({notes_index_assist:a>e.frequency?"higher":"lower"})):this.note_current.mistake_padding-=1},_=function(e){var n=this,r=1e3/((this.state.progress_required+1)*(this.state.progress_required/2)),i=this.state.notes_index_count?this.state.combo+1:0;i>=this.combo_max&&(this.combo_max=i);var a=this.note_current.correct/(this.note_current.mistake+this.note_current.correct)*50,o=(this.note_current.precision_base-this.note_current.rating.reduce(function(t,e){return t+e},0)/this.note_current.rating.length)/this.note_current.precision_base*50,c=a+o,h=Math.round(100*(70*c+i*r*30)/this.state.progress_required),_=this.state.notes_index_count?h:0,u=t.jsonClone([].concat(s(this.state.notes_list)));u[this.state.notes_index].accuracy=this.state.notes_index_count?Math.round(100*a/50):0,u[this.state.notes_index].precision=Math.round(100*o/50);var f=this.state.notes_index+1,g=this.state.notes_index_start;f>=this.state.notes_index_start+this.state.notes_index_range&&(g=this.state.notes_index_start+this.state.notes_index_range);var d=Math.min(this.state.progress_current+1,this.state.progress_required),m=this.state.running;this.sounds.ding.currentTime=0,this.sounds.ding.play(),d==this.state.progress_required&&(f-=1,m=3,this.sounds.dingding.currentTime=0,this.sounds.dingding.play()),this.setState({notes_index:f,score:Math.min(this.state.score+_,1e6),notes_index_count:!0,notes_index_assist:"",notes_index_start:g,progress_current:d,running:m,combo:i,notes_list:u},function(){n.note_current.correct=0,n.note_current.mistake=0,n.note_current.rating=[],n.note_current.precision_base=null,n.note_current.mistake_padding=n.note_current.mistake_padding_max})},u=function(t){this.sounds.dong.currentTime=0,this.sounds.dong.play(),this.setState({notes_index_count:!1,combo:0,errors:this.state.errors+1})}}.call(e,n(58))}});
//# sourceMappingURL=1.299f581a.chunk.js.map